[package]
name = "serde_arrow"
version = "0.9.0-rc.2"
authors = ["Christopher Prohm <mail@cprohm.de>"]
edition = "2021"
description  = "convert sequences of structs / maps to arrow tables"
readme = "../Readme.md"
repository = "https://github.com/chmp/serde_arrow"
license = "MIT"

[lib]
bench = false

[[bench]]
name = "arrow2"
required-features = ["arrow2-0-17", "arrow-48"]
harness = false

[package.metadata.docs.rs]
features = ["arrow2-0-17", "arrow-48"]

[features]
default = []

arrow-49 = ["dep:arrow-array-49", "dep:arrow-schema-49", "dep:arrow-data-49", "dep:arrow-buffer-49"]
arrow-48 = ["dep:arrow-array-48", "dep:arrow-schema-48", "dep:arrow-data-48", "dep:arrow-buffer-48"]
arrow-47 = ["dep:arrow-array-47", "dep:arrow-schema-47", "dep:arrow-data-47", "dep:arrow-buffer-47"]
arrow-46 = ["dep:arrow-array-46", "dep:arrow-schema-46", "dep:arrow-data-46", "dep:arrow-buffer-46"]
arrow-45 = ["dep:arrow-array-45", "dep:arrow-schema-45", "dep:arrow-data-45", "dep:arrow-buffer-45"]
arrow-44 = ["dep:arrow-array-44", "dep:arrow-schema-44", "dep:arrow-data-44", "dep:arrow-buffer-44"]
arrow-43 = ["dep:arrow-array-43", "dep:arrow-schema-43", "dep:arrow-data-43", "dep:arrow-buffer-43"]
arrow-42 = ["dep:arrow-array-42", "dep:arrow-schema-42", "dep:arrow-data-42", "dep:arrow-buffer-42"]
arrow-41 = ["dep:arrow-array-41", "dep:arrow-schema-41", "dep:arrow-data-41", "dep:arrow-buffer-41"]
arrow-40 = ["dep:arrow-array-40", "dep:arrow-schema-40", "dep:arrow-data-40", "dep:arrow-buffer-40"]
arrow-39 = ["dep:arrow-array-39", "dep:arrow-schema-39", "dep:arrow-data-39", "dep:arrow-buffer-39"]
arrow-38 = ["dep:arrow-array-38", "dep:arrow-schema-38", "dep:arrow-data-38", "dep:arrow-buffer-38"]
arrow-37 = ["dep:arrow-array-37", "dep:arrow-schema-37", "dep:arrow-data-37", "dep:arrow-buffer-37"]

[dependencies]
bytemuck = "1"
# TODO: make optional, only required for str -> date conversions
chrono = "0.4"
half = { version = "2", features = ["bytemuck"] }
serde = { version = "1.0", features = ["derive"] }

arrow-array-49 = { package = "arrow-array", version = "49", optional = true }
arrow-buffer-49 = { package = "arrow-buffer", version = "49", optional = true }
arrow-data-49 = { package = "arrow-data", version="49", optional = true }
arrow-schema-49 = { package = "arrow-schema", version = "49", optional = true }

arrow-array-47 = { package = "arrow-array", version = "47", optional = true }
arrow-buffer-47 = { package = "arrow-buffer", version = "47", optional = true }
arrow-data-47 = { package = "arrow-data", version="47", optional = true }
arrow-schema-47 = { package = "arrow-schema", version = "47", optional = true }

arrow-array-46 = { package = "arrow-array", version = "46", optional = true }
arrow-buffer-46 = { package = "arrow-buffer", version = "46", optional = true }
arrow-data-46 = { package = "arrow-data", version="46", optional = true }
arrow-schema-46 = { package = "arrow-schema", version = "46", optional = true }

arrow-array-45 = { package = "arrow-array", version = "45", optional = true }
arrow-buffer-45 = { package = "arrow-buffer", version = "45", optional = true }
arrow-data-45 = { package = "arrow-data", version="45", optional = true }
arrow-schema-45 = { package = "arrow-schema", version = "45", optional = true }

arrow-array-44 = { package = "arrow-array", version = "44", optional = true }
arrow-buffer-44 = { package = "arrow-buffer", version = "44", optional = true }
arrow-data-44 = { package = "arrow-data", version="44", optional = true }
arrow-schema-44 = { package = "arrow-schema", version = "44", optional = true }

arrow-array-43 = { package = "arrow-array", version = "43", optional = true }
arrow-buffer-43 = { package = "arrow-buffer", version = "43", optional = true }
arrow-data-43 = { package = "arrow-data", version="43", optional = true }
arrow-schema-43 = { package = "arrow-schema", version = "43", optional = true }

arrow-array-42 = { package = "arrow-array", version = "42", optional = true }
arrow-buffer-42 = { package = "arrow-buffer", version = "42", optional = true }
arrow-data-42 = { package = "arrow-data", version="42", optional = true }
arrow-schema-42 = { package = "arrow-schema", version = "42", optional = true }

arrow-array-41 = { package = "arrow-array", version = "41", optional = true }
arrow-buffer-41 = { package = "arrow-buffer", version = "41", optional = true }
arrow-data-41 = { package = "arrow-data", version="41", optional = true }
arrow-schema-41 = { package = "arrow-schema", version = "41", optional = true }

arrow-array-40 = { package = "arrow-array", version = "40", optional = true }
arrow-buffer-40 = { package = "arrow-buffer", version = "40", optional = true }
arrow-data-40 = { package = "arrow-data", version="40", optional = true }
arrow-schema-40 = { package = "arrow-schema", version = "40", optional = true }

arrow-array-39 = { package = "arrow-array", version = "39", optional = true }
arrow-buffer-39 = { package = "arrow-buffer", version = "39", optional = true }
arrow-data-39 = { package = "arrow-data", version="39", optional = true }
arrow-schema-39 = { package = "arrow-schema", version = "39", optional = true }

arrow-array-38 = { package = "arrow-array", version = "38", optional = true }
arrow-buffer-38 = { package = "arrow-buffer", version = "38", optional = true }
arrow-data-38 = { package = "arrow-data", version="38", optional = true }
arrow-schema-38 = { package = "arrow-schema", version = "38", optional = true }

arrow-array-37 = { package = "arrow-array", version = "37", optional = true }
arrow-buffer-37 = { package = "arrow-buffer", version = "37", optional = true }
arrow-data-37 = { package = "arrow-data", version="37", optional = true  }
arrow-schema-37 = { package = "arrow-schema", version = "37", optional = true }

arrow2-0-17 = { package = "arrow2", version = "0.17", optional = true }
arrow2-0-16 = { package = "arrow2", version = "0.16", optional = true }

[dev-dependencies]
anyhow = "1"
chrono = { version = "0.4", features = ["serde"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
rand = "0.8"

# for benchmarks
arrow-json-48 = { package = "arrow-json", version = "48" }
criterion = "0.4"
arrow2_convert = "0.5.0"
